(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t,n){e.target.closest(".card").remove(),function(e,t){"357c166adad92a7befb72246"===e&&fetch("https://nomoreparties.co/v1/wff-cohort-26/cards/".concat(t),{method:"DELETE",headers:{authorization:"a2ef26c3-5a50-4a66-8ea0-7a5daae078df"}})}(t,n)}function n(e,t,n){e.target.classList.contains("card__like-button")&&(e.target.classList.contains("card__like-button_is-active")?(e.target.classList.remove("card__like-button_is-active"),function(e,t){fetch("https://nomoreparties.co/v1/wff-cohort-26/cards/likes/".concat(e),{method:"DELETE",headers:{authorization:"a2ef26c3-5a50-4a66-8ea0-7a5daae078df"}}).then((function(e){return e.json()})).then((function(e){t.textContent=e.likes.length}))}(t,n)):(e.target.classList.add("card__like-button_is-active"),function(e,t){fetch("https://nomoreparties.co/v1/wff-cohort-26/cards/likes/".concat(e),{method:"PUT",headers:{authorization:"a2ef26c3-5a50-4a66-8ea0-7a5daae078df"}}).then((function(e){return e.json()})).then((function(e){t.textContent=e.likes.length}))}(t,n)))}function o(e){e.classList.add("popup_is-opened"),e.addEventListener("keydown",c)}function r(e,t){var n,o;e.classList.remove("popup_is-opened"),e.removeEventListener("keydown",c),n=t,o=Array.from(n.querySelectorAll(".form__input-error")),Array.from(n.querySelectorAll(".popup__input")).forEach((function(e){e.classList.remove("form__input_type_error")})),o.forEach((function(e){e.textContent=""})),n.reset()}function a(e,t){var n=document.querySelector(".popup_is-opened");(e.target.classList.contains("popup__close")||e.target.classList.contains("popup"))&&r(n,t)}function c(e){"Escape"===e.key&&r(document.querySelector(".popup_is-opened"))}function i(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.disabled=!1:t.disabled=!0}e.d({},{Tp:()=>u,mo:()=>k,Qn:()=>g,Tm:()=>j});var u=document.querySelector("#card-template").content,s=document.querySelector(".places__list"),d=document.forms["edit-profile"],l=d.elements.name,p=d.elements.description,f=document.querySelector(".popup_type_edit"),_=document.querySelector(".profile__edit-button"),m=document.querySelector(".popup_type_new-card"),v=document.querySelector(".profile__add-button"),y=document.forms["new-place"],h=y.elements["place-name"],b=y.elements.link,S=document.querySelector(".popup_type_image"),q=S.querySelector(".popup__image"),L=S.querySelector(".popup__caption"),g=document.querySelector(".profile__title"),k=document.querySelector(".profile__description"),E=document.querySelector(".profile__image"),C=document.querySelector(".popup_type_avatar"),x=document.forms.avatar,w=x.elements.avatar;function T(e){e.target.classList.contains("card__image")&&(o(S),q.src=e.target.src,q.alt=e.target.alt,L.textContent=e.target.alt)}function j(e){e.forEach((function(e){var o,r,a,c,i,d,l,p,f,_,m,v,y,h,b,S,q=(o=e.link,r=e.name,a=e.likes.length,c=e.likes,i=e.owner._id,d=e._id,l=t,p=n,f=T,v=(m=u.querySelector(".places__item").cloneNode(!0)).querySelector(".card__delete-button"),y=m.querySelector(".card__like-button"),h=m.querySelector(".card__image"),b=m.querySelector(".card__title"),_=a,(S=m.querySelector(".likes")).textContent=0==_?"":_,function(e,t){e.forEach((function(e){"357c166adad92a7befb72246"===e._id&&t.classList.add("card__like-button_is-active")}))}(c,y),"357c166adad92a7befb72246"!==i&&v.remove(),h.src=o,h.alt=r,b.textContent=r,v.addEventListener("click",(function(e){return l(e,i,d)})),y.addEventListener("click",(function(e){return p(e,d,S)})),h.addEventListener("click",f),m);s.append(q)}))}_.addEventListener("click",(function(){l.value=g.textContent,p.value=k.textContent,o(f),d.querySelector(".popup__button").disabled=!0,d.querySelector(".popup__button").textContent="Сохранить"})),d.addEventListener("submit",(function(e){e.preventDefault();var t,n,o=f.querySelector(".popup__button");g.textContent=l.value,k.textContent=p.value,t=l.value,n=p.value,o.textContent="Сохранение...",fetch("https://nomoreparties.co/v1/wff-cohort-26/users/me",{method:"PATCH",headers:{authorization:"a2ef26c3-5a50-4a66-8ea0-7a5daae078df","Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}),r(f,d)})),f.addEventListener("click",(function(e){return a(e,d)})),v.addEventListener("click",(function(){o(m),y.querySelector(".popup__button").disabled=!0,y.querySelector(".popup__button").textContent="Создать"})),y.addEventListener("submit",(function(e){e.preventDefault();var t,n,o=m.querySelector(".popup__button");t=b.value,n=h.value,o.textContent="Сохранение...",fetch("https://nomoreparties.co/v1/wff-cohort-26/cards",{method:"POST",headers:{authorization:"a2ef26c3-5a50-4a66-8ea0-7a5daae078df","Content-Type":"application/json"},body:JSON.stringify({name:n,link:t})}),r(m,y)})),m.addEventListener("click",(function(e){return a(e,y)})),S.addEventListener("click",a),E.addEventListener("click",(function(){o(C),x.querySelector(".popup__button").disabled=!0,x.querySelector(".popup__button").textContent="Сохранить"})),x.addEventListener("submit",(function(e){e.preventDefault();var t,n=C.querySelector(".popup__button");E.url=w.value,t=E,n.textContent="Сохранение...",fetch("https://nomoreparties.co/v1/wff-cohort-26/users/me/avatar",{method:"PATCH",headers:{authorization:"a2ef26c3-5a50-4a66-8ea0-7a5daae078df","Content-Type":"application/json"},body:JSON.stringify({avatar:t.url})}).then((function(e){return e.json()})).then((function(e){document.querySelector(".profile__image").style.backgroundImage="url(".concat(e.avatar,")")})),r(C,x)})),C.addEventListener("click",(function(e){return a(e,x)})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");i(t,n),t.forEach((function(o){o.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),n.textContent=""}(e,t):function(e,t,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),o.textContent=n}(e,t,t.validationMessage)}(e,o),i(t,n)}))}))}(e)})),fetch("https://nomoreparties.co/v1/wff-cohort-26/cards",{headers:{authorization:"a2ef26c3-5a50-4a66-8ea0-7a5daae078df"}}).then((function(e){return e.json()})).then((function(e){j(e)})),fetch("https://mesto.nomoreparties.co/v1/wff-cohort-26/users/me",{headers:{authorization:"a2ef26c3-5a50-4a66-8ea0-7a5daae078df"}}).then((function(e){return e.json()})).then((function(e){document.querySelector(".profile__image").style.backgroundImage="url(".concat(e.avatar,")"),g.textContent=e.name,k.textContent=e.about}))})();